const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSGQh_Nv_DtmFplg_B82wmuN4SuNlG1fhKbOhRPlGHvnQQwgU7tc3L0lmrEzhTGp5bzEVTkNAhw1rBJ/pub?output=csv"; // Your Google Sheets CSV link

const currentPage = "page1"; // Change this dynamically based on which page you're on

fetch(sheetUrl)
  .then(response => response.text())
  .then(data => {
    const rows = data.split("\n").slice(1); // Remove header row
    const filteredRows = rows
      .map(row => row.split(","))
      .filter(cols => cols[4]?.trim() === currentPage); // Filter by Page column

    let output = "";
    filteredRows.forEach(cols => {
      output += `
        <div class="product">
          <img src="${cols[0]}" alt="${cols[1]}">
          <h2>${cols[1]}</h2>
          <p>${cols[2]}</p>
          <p>Price: $${cols[3]}</p>
        </div>
      `;
    });

    document.getElementById("product-container").innerHTML = output;
  })
  .catch(error => console.error("Error loading data:", error));
